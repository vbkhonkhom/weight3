# WTH Fitness App Setup Script (PowerShell)
# ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏ã‡πá‡∏ï‡∏≠‡∏±‡∏û‡πÅ‡∏≠‡∏õ‡∏ö‡∏ô Windows

Write-Host "üèÉ‚Äç‚ôÄÔ∏è WTH Fitness App - Setup Script" -ForegroundColor Cyan
Write-Host "==================================" -ForegroundColor Cyan

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Node.js
try {
    $nodeVersion = node --version
    Write-Host "‚úÖ Node.js version: $nodeVersion" -ForegroundColor Green
} catch {
    Write-Host "‚ùå Node.js ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô" -ForegroundColor Red
    Write-Host "üí° ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà: https://nodejs.org/" -ForegroundColor Yellow
    exit 1
}

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö npm
try {
    $npmVersion = npm --version
    Write-Host "‚úÖ npm version: $npmVersion" -ForegroundColor Green
} catch {
    Write-Host "‚ùå npm ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á" -ForegroundColor Red
    exit 1
}

# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies
Write-Host ""
Write-Host "üì¶ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies..." -ForegroundColor Yellow
npm install

if ($LASTEXITCODE -eq 0) {
    Write-Host "‚úÖ ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à" -ForegroundColor Green
} else {
    Write-Host "‚ùå ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à" -ForegroundColor Red
    exit 1
}

# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå .env.local ‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ
if (-not (Test-Path ".env.local")) {
    Write-Host ""
    Write-Host "üìù ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå .env.local..." -ForegroundColor Yellow
    
    $envContent = @"
# WTH Fitness App Environment Variables
# Google Apps Script Configuration
NEXT_PUBLIC_GAS_BASE_URL=https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec
NEXT_PUBLIC_GAS_API_KEY=your-api-key-here
NEXT_PUBLIC_USE_MOCKS=true

# ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö development ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô false ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Apps Script ‡∏à‡∏£‡∏¥‡∏á
"@
    
    $envContent | Out-File -FilePath ".env.local" -Encoding UTF8
    Write-Host "‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå .env.local ‡πÅ‡∏•‡πâ‡∏ß" -ForegroundColor Green
    Write-Host "‚ö†Ô∏è  ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç URL ‡πÅ‡∏•‡∏∞ API Key ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå .env.local" -ForegroundColor Yellow
} else {
    Write-Host "‚úÖ ‡πÑ‡∏ü‡∏•‡πå .env.local ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß" -ForegroundColor Green
}

Write-Host ""
Write-Host "üéâ ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!" -ForegroundColor Green
Write-Host ""
Write-Host "üìã ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ:" -ForegroundColor Cyan
Write-Host "1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå .env.local ‡πÉ‡∏´‡πâ‡∏°‡∏µ Apps Script URL ‡πÅ‡∏•‡∏∞ API Key ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"
Write-Host "2. ‡∏£‡∏±‡∏ô 'npm run dev' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå development"
Write-Host "3. ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏õ‡∏ó‡∏µ‡πà http://localhost:3000"
Write-Host ""
Write-Host "üìö ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà: docs/user-guide.md" -ForegroundColor Blue
Write-Host "üîó Google Sheets ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: https://docs.google.com/spreadsheets/d/1AZ3_0g6bGya0sa2Ij1zKJZXNl3uS5P1etYL3csKt-HY/edit" -ForegroundColor Blue