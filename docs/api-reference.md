# üîå API Reference - WTH Fitness App

> ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á API ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö WTH Fitness App

---

## üìã ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç

1. [‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° API](#‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°-api)
2. [Authentication](#authentication)
3. [User Management](#user-management)
4. [Class Management](#class-management)
5. [Test Results](#test-results)
6. [Standards Management](#standards-management)
7. [Sport Types Management](#sport-types-management)
8. [Fitness Criteria Management](#fitness-criteria-management)
9. [Error Codes](#error-codes)

---

## ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° API

### Base URL
```
https://script.google.com/macros/s/{DEPLOYMENT_ID}/exec
```

### Request Format
```http
POST /exec?action={ACTION_NAME}
Content-Type: application/json
Authorization: Bearer {API_KEY}

{
  "token": "user_session_token",
  "...additional_params"
}
```

### Response Format
```json
{
  "success": true,
  "data": { ... },
  "message": "Operation successful"
}
```

---

## Authentication

### 1. Send OTP
‡∏™‡πà‡∏á‡∏£‡∏´‡∏±‡∏™ OTP ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•

**Endpoint:** `POST /exec?action=sendOTP`

**Request:**
```json
{
  "email": "user@school.ac.th"
}
```

**Response:**
```json
{
  "success": true,
  "message": "OTP sent to email",
  "otpToken": "temp_token_xyz123"
}
```

---

### 2. Verify OTP
‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™ OTP

**Endpoint:** `POST /exec?action=verifyOTP`

**Request:**
```json
{
  "otpToken": "temp_token_xyz123",
  "otp": "123456"
}
```

**Response:**
```json
{
  "success": true,
  "verified": true
}
```

---

### 3. Register
‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà

**Endpoint:** `POST /exec?action=register`

**Request:**
```json
{
  "otpToken": "temp_token_xyz123",
  "role": "student",
  "full_name": "‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ",
  "email": "somchai@school.ac.th",
  "password": "secure_password",
  "gender": "‡∏ä‡∏≤‡∏¢",
  "birthdate": "2010-05-15",
  "class_id": "class123",
  "sport_type": "‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•",
  "position": "‡∏Å‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Registration successful",
  "user": {
    "id": "user123",
    "email": "somchai@school.ac.th",
    "role": "student"
  }
}
```

---

### 4. Login
‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö

**Endpoint:** `POST /exec?action=login`

**Request:**
```json
{
  "email": "somchai@school.ac.th",
  "password": "secure_password"
}
```

**Response:**
```json
{
  "success": true,
  "token": "session_token_abc456",
  "user": {
    "id": "user123",
    "email": "somchai@school.ac.th",
    "full_name": "‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ",
    "role": "student",
    "gender": "‡∏ä‡∏≤‡∏¢",
    "birthdate": "2010-05-15",
    "class_id": "class123",
    "sport_type": "‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•",
    "position": "‡∏Å‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á"
  }
}
```

---

### 5. Change Password
‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô

**Endpoint:** `POST /exec?action=changePassword`

**Request:**
```json
{
  "token": "session_token_abc456",
  "oldPassword": "old_password",
  "newPassword": "new_password"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Password changed successfully"
}
```

---

## User Management

### 1. Get My Profile
‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á

**Endpoint:** `POST /exec?action=getMyProfile`

**Request:**
```json
{
  "token": "session_token_abc456"
}
```

**Response:**
```json
{
  "success": true,
  "user": {
    "id": "user123",
    "email": "somchai@school.ac.th",
    "full_name": "‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ",
    "role": "student",
    "gender": "‡∏ä‡∏≤‡∏¢",
    "birthdate": "2010-05-15",
    "class_id": "class123",
    "sport_type": "‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•",
    "position": "‡∏Å‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á",
    "created_at": "2024-01-15T10:00:00Z"
  }
}
```

---

### 2. List Users
‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)

**Endpoint:** `POST /exec?action=listUsers`

**Request:**
```json
{
  "token": "instructor_token"
}
```

**Response:**
```json
{
  "success": true,
  "users": [
    {
      "id": "user123",
      "full_name": "‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ",
      "email": "somchai@school.ac.th",
      "role": "student",
      "class_id": "class123"
    }
  ]
}
```

---

## Class Management

### 1. Create Class
‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà (‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)

**Endpoint:** `POST /exec?action=createClass`

**Request:**
```json
{
  "token": "instructor_token",
  "class_name": "PE-101",
  "class_code": "PE101-2024"
}
```

**Response:**
```json
{
  "success": true,
  "class": {
    "id": "class123",
    "class_name": "PE-101",
    "class_code": "PE101-2024",
    "instructor_id": "instructor001",
    "created_at": "2024-10-22T10:00:00Z"
  }
}
```

---

### 2. List Classes
‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ä‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

**Endpoint:** `POST /exec?action=listClasses`

**Request:**
```json
{
  "token": "session_token"
}
```

**Response:**
```json
{
  "success": true,
  "classes": [
    {
      "id": "class123",
      "class_name": "PE-101",
      "class_code": "PE101-2024",
      "instructor_id": "instructor001",
      "student_count": 24
    }
  ]
}
```

---

### 3. Get Class Roster
‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏ô‡∏ä‡∏±‡πâ‡∏ô

**Endpoint:** `POST /exec?action=getClassRoster`

**Request:**
```json
{
  "token": "instructor_token",
  "class_id": "class123"
}
```

**Response:**
```json
{
  "success": true,
  "roster": [
    {
      "studentId": "user123",
      "fullName": "‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ",
      "email": "somchai@school.ac.th",
      "gender": "‡∏ä‡∏≤‡∏¢",
      "birthdate": "2010-05-15",
      "latestBMI": 22.5,
      "latestBMIEval": "‡∏õ‡∏Å‡∏ï‡∏¥"
    }
  ]
}
```

---

## Test Results

### 1. Add Test Result
‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

**Endpoint:** `POST /exec?action=addTestResult`

**Request:**
```json
{
  "token": "session_token",
  "test_type": "BMI",
  "value": 22.5,
  "derived_value": null,
  "evaluation": "‡∏õ‡∏Å‡∏ï‡∏¥",
  "notes": "‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢"
}
```

**Response:**
```json
{
  "success": true,
  "testResult": {
    "id": "test001",
    "user_id": "user123",
    "test_type": "BMI",
    "value": 22.5,
    "evaluation": "‡∏õ‡∏Å‡∏ï‡∏¥",
    "recorded_at": "2024-10-22T14:30:00Z"
  }
}
```

---

### 2. Get Test Results
‡∏î‡∏∂‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

**Endpoint:** `POST /exec?action=getTestResults`

**Request:**
```json
{
  "token": "session_token",
  "user_id": "user123",
  "test_type": "BMI"
}
```

**Response:**
```json
{
  "success": true,
  "results": [
    {
      "id": "test001",
      "test_type": "BMI",
      "value": 22.5,
      "evaluation": "‡∏õ‡∏Å‡∏ï‡∏¥",
      "recorded_at": "2024-10-22T14:30:00Z",
      "notes": "‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢"
    }
  ]
}
```

---

### 3. Get Latest Test Result
‡∏î‡∏∂‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î

**Endpoint:** `POST /exec?action=getLatestTestResult`

**Request:**
```json
{
  "token": "session_token",
  "test_type": "BMI"
}
```

**Response:**
```json
{
  "success": true,
  "result": {
    "id": "test001",
    "test_type": "BMI",
    "value": 22.5,
    "evaluation": "‡∏õ‡∏Å‡∏ï‡∏¥",
    "recorded_at": "2024-10-22T14:30:00Z"
  }
}
```

---

## Standards Management

### 1. Get Standards
‡∏î‡∏∂‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô

**Endpoint:** `POST /exec?action=getStandards`

**Request:**
```json
{
  "token": "session_token"
}
```

**Response:**
```json
{
  "success": true,
  "standards": [
    {
      "id": "std001",
      "test_type": "BMI",
      "gender": "‡∏ä‡∏≤‡∏¢",
      "age_min": 18,
      "age_max": 25,
      "category": "‡∏õ‡∏Å‡∏ï‡∏¥",
      "min_value": 18.5,
      "max_value": 22.9,
      "comparison": "between"
    }
  ]
}
```

---

## Sport Types Management

### 1. Get Sport Types
‡∏î‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏µ‡∏¨‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

**Endpoint:** `POST /exec?action=getSportTypes`

**Request:**
```json
{
  "token": "instructor_token"
}
```

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "sport001",
      "name": "‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•",
      "positions": ["‡∏Å‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤", "‡∏Å‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á", "‡∏Å‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á", "‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏õ‡∏£‡∏∞‡∏ï‡∏π"],
      "created_at": "2024-10-22T10:00:00Z"
    }
  ]
}
```

---

### 2. Add Sport Type
‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏µ‡∏¨‡∏≤‡πÉ‡∏´‡∏°‡πà (‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)

**Endpoint:** `POST /exec?action=addSportType`

**Request:**
```json
{
  "token": "instructor_token",
  "name": "‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•",
  "positions": ["‡∏Å‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤", "‡∏Å‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á", "‡∏Å‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á", "‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏õ‡∏£‡∏∞‡∏ï‡∏π"]
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "id": "sport001",
    "name": "‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•",
    "positions": ["‡∏Å‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤", "‡∏Å‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á", "‡∏Å‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á", "‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏õ‡∏£‡∏∞‡∏ï‡∏π"],
    "created_at": "2024-10-22T10:00:00Z"
  }
}
```

---

### 3. Update Sport Type
‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏µ‡∏¨‡∏≤ (‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)

**Endpoint:** `POST /exec?action=updateSportType`

**Request:**
```json
{
  "token": "instructor_token",
  "id": "sport001",
  "name": "‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç)",
  "positions": ["‡∏Å‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤", "‡∏Å‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á", "‡∏Å‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á", "‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏õ‡∏£‡∏∞‡∏ï‡∏π", "‡∏õ‡∏µ‡∏Å"]
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "id": "sport001",
    "name": "‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç)",
    "positions": ["‡∏Å‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤", "‡∏Å‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á", "‡∏Å‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á", "‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏õ‡∏£‡∏∞‡∏ï‡∏π", "‡∏õ‡∏µ‡∏Å"],
    "created_at": "2024-10-22T10:00:00Z"
  }
}
```

---

### 4. Delete Sport Type
‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏µ‡∏¨‡∏≤ (‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)

**Endpoint:** `POST /exec?action=deleteSportType`

**Request:**
```json
{
  "token": "instructor_token",
  "id": "sport001"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Sport type deleted"
}
```

---

## Fitness Criteria Management

### 1. Get Fitness Criteria
‡∏î‡∏∂‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏™‡∏°‡∏£‡∏£‡∏ñ‡∏†‡∏≤‡∏û‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

**Endpoint:** `POST /exec?action=getFitnessCriteria`

**Request:**
```json
{
  "token": "instructor_token"
}
```

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "criteria001",
      "sportType": "‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•",
      "gender": "male",
      "ageMin": 18,
      "ageMax": 25,
      "testType": "VO2 Max",
      "excellent": "> 55",
      "good": "50-55",
      "fair": "45-50",
      "poor": "< 45",
      "unit": "ml/kg/min",
      "createdAt": "2024-10-22T10:00:00Z"
    }
  ]
}
```

---

### 2. Add Fitness Criteria
‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏™‡∏°‡∏£‡∏£‡∏ñ‡∏†‡∏≤‡∏û‡πÉ‡∏´‡∏°‡πà (‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)

**Endpoint:** `POST /exec?action=addFitnessCriteria`

**Request:**
```json
{
  "token": "instructor_token",
  "sportType": "‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•",
  "gender": "male",
  "ageMin": 18,
  "ageMax": 25,
  "testType": "VO2 Max",
  "excellent": "> 55",
  "good": "50-55",
  "fair": "45-50",
  "poor": "< 45",
  "unit": "ml/kg/min"
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "id": "criteria001",
    "sportType": "‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•",
    "gender": "male",
    "ageMin": 18,
    "ageMax": 25,
    "testType": "VO2 Max",
    "excellent": "> 55",
    "good": "50-55",
    "fair": "45-50",
    "poor": "< 45",
    "unit": "ml/kg/min",
    "createdAt": "2024-10-22T10:00:00Z"
  }
}
```

---

### 3. Update Fitness Criteria
‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏™‡∏°‡∏£‡∏£‡∏ñ‡∏†‡∏≤‡∏û (‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)

**Endpoint:** `POST /exec?action=updateFitnessCriteria`

**Request:**
```json
{
  "token": "instructor_token",
  "id": "criteria001",
  "excellent": "> 60",
  "good": "55-60"
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "id": "criteria001",
    "sportType": "‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•",
    "gender": "male",
    "ageMin": 18,
    "ageMax": 25,
    "testType": "VO2 Max",
    "excellent": "> 60",
    "good": "55-60",
    "fair": "45-50",
    "poor": "< 45",
    "unit": "ml/kg/min",
    "createdAt": "2024-10-22T10:00:00Z"
  }
}
```

---

### 4. Delete Fitness Criteria
‡∏•‡∏ö‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏™‡∏°‡∏£‡∏£‡∏ñ‡∏†‡∏≤‡∏û (‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)

**Endpoint:** `POST /exec?action=deleteFitnessCriteria`

**Request:**
```json
{
  "token": "instructor_token",
  "id": "criteria001"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Fitness criteria deleted"
}
```

---

## Error Codes

### HTTP Status Codes
| Code | Description |
|------|-------------|
| 200 | Success |
| 400 | Bad Request - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á |
| 401 | Unauthorized - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á |
| 404 | Not Found - ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• |
| 500 | Internal Server Error - ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏à‡∏≤‡∏Å‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå |

### Error Response Format
```json
{
  "success": false,
  "error": "Error message",
  "code": "ERROR_CODE"
}
```

### Common Error Codes
| Code | Message | Description |
|------|---------|-------------|
| `MISSING_PARAMS` | Missing required parameters | ‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≤‡∏î‡∏´‡∏≤‡∏¢‡πÑ‡∏õ |
| `INVALID_TOKEN` | Invalid session token | Token ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ |
| `UNAUTHORIZED` | Unauthorized access | ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á |
| `USER_NOT_FOUND` | User not found | ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ |
| `INVALID_CREDENTIALS` | Invalid email or password | ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á |
| `DUPLICATE_EMAIL` | Email already exists | ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß |
| `CLASS_NOT_FOUND` | Class not found | ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ä‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô |
| `INVALID_OTP` | Invalid OTP code | ‡∏£‡∏´‡∏±‡∏™ OTP ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á |

---

## üìù ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### JavaScript/TypeScript (Frontend)
```typescript
async function loginUser(email: string, password: string) {
  const response = await fetch(
    `${process.env.NEXT_PUBLIC_GAS_API_URL}?action=login`,
    {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${process.env.NEXT_PUBLIC_GAS_API_KEY}`
      },
      body: JSON.stringify({ email, password })
    }
  );
  
  const data = await response.json();
  
  if (data.success) {
    localStorage.setItem('token', data.token);
    return data.user;
  } else {
    throw new Error(data.error);
  }
}
```

### cURL (Testing)
```bash
curl -X POST \
  'https://script.google.com/macros/s/YOUR_ID/exec?action=login' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer YOUR_API_KEY' \
  -d '{
    "email": "test@school.ac.th",
    "password": "password123"
  }'
```

---

## üîí Security Notes

1. **API Key:** ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡πÉ‡∏ô Authorization header ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
2. **Session Token:** ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö authenticated endpoints
3. **HTTPS Only:** ‡πÉ‡∏ä‡πâ HTTPS ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
4. **Rate Limiting:** ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ï‡πà‡∏≠‡∏ô‡∏≤‡∏ó‡∏µ
5. **CORS:** ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ allowed origins ‡πÉ‡∏ô Apps Script

---

## üìö ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

- [Getting Started](getting-started.md)
- [Instructor Guide](instructor-guide.md)
- [Development Guide](development.md)

---

**Last Updated:** October 22, 2025
